pipeline {
  //agent { dockerfile true }
  agent any
  stages {
    stage('Test') {
      steps {
        //dir('var') {
          script {

            def payload = currentBuild.rawBuild.request.content
            echo "Received payload: ${payload}"
            
            // Parse the JSON payload
            def json = readJSON text: payload
            def eventType = json['action']
            def repositoryName = json['repository']['name']
            
            echo "Event type: ${eventType}"
            echo "Repository name: ${repositoryName}"
  
            sh '''
                ls -l
                git status
                git branch
            '''
          }
        //}
      }
    }
  }
}
